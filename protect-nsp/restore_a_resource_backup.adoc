---
permalink: protect-nsp/restore_a_resource_backup.html 
sidebar: sidebar 
keywords: restore 
summary: Puede utilizar SnapCenter para restaurar recursos.  Las capacidades de las operaciones de restauración dependen del complemento que utilice. 
---
= Restaurar una copia de seguridad de recursos
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Puede utilizar SnapCenter para restaurar recursos.  Las capacidades de las operaciones de restauración dependen del complemento que utilice.

.Antes de empezar
* Debes haber realizado una copia de seguridad del recurso o del grupo de recursos.
* El administrador de SnapCenter debe haberle asignado las máquinas virtuales de almacenamiento (SVM) tanto para los volúmenes de origen como para los de destino si está replicando instantáneas a un espejo o bóveda.
* Debe haber cancelado cualquier operación de respaldo que esté actualmente en curso para el recurso o grupo de recursos que desea restaurar.


.Acerca de esta tarea
* La operación de restauración predeterminada solo restaura objetos de almacenamiento.  Las operaciones de restauración a nivel de aplicación solo se pueden realizar si el complemento compatible con NetApp proporciona esa capacidad.
* Para ONTAP 9.12.1 y versiones anteriores, los clones creados a partir de las instantáneas de SnapLock Vault como parte de la restauración heredarán el tiempo de vencimiento de SnapLock Vault. El administrador de almacenamiento debe limpiar manualmente los clones después del tiempo de vencimiento de SnapLock .


[role="tabbed-block"]
====
.Interfaz de usuario de SnapCenter
--
.Pasos
. En el panel de navegación izquierdo, haga clic en *Recursos* y luego seleccione el complemento apropiado de la lista.
. En la página Recursos, filtre los recursos de la lista desplegable *Ver* según el tipo de recurso.
+
Los recursos se muestran junto con información como el tipo, el nombre del host o clúster, los grupos de recursos y políticas asociados y el estado.

+

NOTE: Aunque una copia de seguridad puede ser para un grupo de recursos, al restaurarla debe seleccionar los recursos individuales que desea restaurar.

+
Si el recurso no está protegido, se muestra _No protegido_ en la columna *Estado general*.

+
El estado _No protegido_ en la columna *Estado general* puede significar que el recurso no está protegido o que un usuario diferente realizó una copia de seguridad del recurso.

. Seleccione el recurso o seleccione un grupo de recursos y luego seleccione un recurso en ese grupo.
+
Se muestra la página de topología de recursos.

. Desde la vista *Administrar copias*, seleccione *Copias de seguridad* de los sistemas de almacenamiento primario o secundario (duplicado o almacenado en bóveda).
. En la tabla Copias de seguridad principales, seleccione la copia de seguridad que desea restaurar y luego haga clic enimage:../media/restore_icon.gif["icono de restauración"] .
+
image::../media/restoring_resource.gif[restauración de recursos]

. En la página Restaurar alcance, seleccione *Recurso completo* o *Nivel de archivo*.
+
.. Si seleccionó *Recurso completo*, se restaura la copia de seguridad del recurso.
+
Si el recurso contiene volúmenes o qtrees como huella de almacenamiento, las instantáneas más nuevas en dichos volúmenes o qtrees se eliminan y no se pueden recuperar.  Además, si algún otro recurso está alojado en los mismos volúmenes o qtrees, ese recurso también se elimina.

.. Si seleccionó *Nivel de archivo*, puede seleccionar *Todos*, o seleccionar volúmenes o qtrees y luego ingresar la ruta relacionada con los volúmenes o qtrees seleccionados, separados por comas.
+
*** Puede seleccionar varios volúmenes y qtrees.
*** Si el tipo de recurso es LUN, se restaura el LUN completo.  Puede seleccionar varios LUN.  + NOTA: Si selecciona *Todos*, se restaurarán todos los archivos en los volúmenes, qtrees o LUN.




. En la página *Operaciones previas*, ingrese los comandos de restauración previa y de desmontaje para ejecutar antes de realizar un trabajo de restauración.
. En la página *Operaciones posteriores*, ingrese los comandos de montaje y restauración posterior para ejecutarlos después de realizar un trabajo de restauración.
. En la página *Notificación*, de la lista desplegable *Preferencias de correo electrónico*, seleccione los escenarios en los que desea enviar los correos electrónicos.
+
También debe especificar las direcciones de correo electrónico del remitente y del destinatario, y el asunto del correo electrónico.  El SMTP también debe configurarse en la página *Configuración* > *Configuración global*.

. Revise el resumen y luego haga clic en *Finalizar*.
. Supervise el progreso de la operación haciendo clic en *Monitor* > *Trabajos*.


--
.Cmdlets de PowerShell
--
.Pasos
. Inicie una sesión de conexión con el servidor SnapCenter para un usuario específico mediante el cmdlet Open-SmConnection.
+
[listing]
----
PS C:\> Open-Smconnection
----
. Recupere la información sobre una o más copias de seguridad que desee restaurar mediante los cmdlets Get-SmBackup y Get-SmBackupReport.
+
Este ejemplo muestra información sobre todas las copias de seguridad disponibles:

+
[listing]
----
PS C:\> Get-SmBackup

BackupId                      BackupName                    BackupTime                    BackupType
--------                      ----------                    ----------                    ----------
  1               Payroll Dataset_vise-f6_08... 8/4/2015    11:02:32 AM                 Full Backup
  2               Payroll Dataset_vise-f6_08... 8/4/2015    11:23:17 AM
----
+
Este ejemplo muestra información detallada sobre la copia de seguridad del 29 de enero de 2015 al 3 de febrero de 2015:

+
[listing]
----
PS C:\> Get-SmBackupReport -FromDateTime "1/29/2015" -ToDateTime "2/3/2015"

   SmBackupId           : 113
   SmJobId              : 2032
   StartDateTime        : 2/2/2015 6:57:03 AM
   EndDateTime          : 2/2/2015 6:57:11 AM
   Duration             : 00:00:07.3060000
   CreatedDateTime      : 2/2/2015 6:57:23 AM
   Status               : Completed
   ProtectionGroupName  : Clone
   SmProtectionGroupId  : 34
   PolicyName           : Vault
   SmPolicyId           : 18
   BackupName           : Clone_SCSPR0019366001_02-02-2015_06.57.08
   VerificationStatus   : NotVerified

   SmBackupId           : 114
   SmJobId              : 2183
   StartDateTime        : 2/2/2015 1:02:41 PM
   EndDateTime          : 2/2/2015 1:02:38 PM
   Duration             : -00:00:03.2300000
   CreatedDateTime      : 2/2/2015 1:02:53 PM
   Status               : Completed
   ProtectionGroupName  : Clone
   SmProtectionGroupId  : 34
   PolicyName           : Vault
   SmPolicyId           : 18
   BackupName           : Clone_SCSPR0019366001_02-02-2015_13.02.45
   VerificationStatus   : NotVerified
----
. Restaure datos de la copia de seguridad mediante el cmdlet Restore-SmBackup.
+
[listing]
----
Restore-SmBackup -PluginCode 'DummyPlugin' -AppObjectId 'scc54.sccore.test.com\DummyPlugin\NTP\DB1' -BackupId 269 -Confirm:$false
output:
Name                : Restore 'scc54.sccore.test.com\DummyPlugin\NTP\DB1'
Id                  : 2368
StartTime           : 10/4/2016 11:22:02 PM
EndTime             :
IsCancellable       : False
IsRestartable       : False
IsCompleted         : False
IsVisible           : True
IsScheduled         : False
PercentageCompleted : 0
Description         :
Status              : Queued
Owner               :
Error               :
Priority            : None
Tasks               : {}
ParentJobID         : 0
EventId             : 0
JobTypeId           :
ApisJobKey          :
ObjectId            : 0
PluginCode          : NONE
PluginName          :
----


La información sobre los parámetros que se pueden utilizar con el cmdlet y sus descripciones se puede obtener ejecutando _Get-Help command_name_. Alternativamente, también puede consultar la https://docs.netapp.com/us-en/snapcenter-cmdlets/index.html["Guía de referencia de cmdlets del software SnapCenter"^] .

--
====